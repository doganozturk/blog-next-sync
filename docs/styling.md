# Styling

This document describes the CSS architecture and theming system.

> **Source of truth:** `src/styles/`, `src/app/globals.css`, component `*.module.css` files

## Overview

The blog uses a layered CSS system:

1. **CSS Reset** - Normalize browser defaults
2. **CSS Variables** - Design tokens for colors, spacing, typography
3. **Global Styles** - Base element styling and theme application
4. **Utility Classes** - Common layout utilities
5. **Post Styles** - Typography for MDX content
6. **Syntax Highlighting** - Code block styling (Shiki)
7. **CSS Modules** - Component-scoped styles

## CSS Import Order

`src/app/globals.css` imports stylesheets in this order:

```css
@import "@/styles/reset.css";
@import "@/styles/variables.css";
@import "@/styles/utilities.css";
@import "@/styles/global.css";
@import "@/styles/post.css";
@import "@/styles/shiki.css";
```

Order matters - later imports can override earlier ones.

## Design Tokens

`src/styles/variables.css` defines CSS custom properties:

### Colors

```css
:root {
  /* Neutral palette */
  --color-stone-50: #faf8f5;
  --color-stone-100: #f4f1ed;
  /* ... through stone-950 */
  
  /* Accent */
  --color-amber-600: #d99a00;
}
```

### Typography

```css
:root {
  --font-family-sans: system-ui, -apple-system, sans-serif;
  --font-family-mono: ui-monospace, "SF Mono", monospace;
  
  --font-size-xs: 0.75rem;
  --font-size-sm: 0.875rem;
  /* ... through 4xl */
  
  --line-height-tight: 1.25;
  --line-height-normal: 1.5;
  --line-height-relaxed: 1.75;
}
```

### Spacing

```css
:root {
  --spacing-1: 0.25rem;
  --spacing-2: 0.5rem;
  /* ... through spacing-24 */
}
```

### Breakpoints

```css
:root {
  --breakpoint-sm: 640px;
  --breakpoint-md: 768px;
  --breakpoint-lg: 1024px;
}
```

## Theme System

### Theme Provider

The app uses `next-themes` with class-based theming:

```tsx
<ThemeProvider attribute="class">
  {children}
</ThemeProvider>
```

This adds `light` or `dark` class to `<html>`.

### Theme Application

`src/styles/global.css` applies theme-specific variables:

```css
html.light .theme-container {
  --bg-primary: var(--color-stone-50);
  --text-primary: var(--color-stone-900);
  --text-secondary: var(--color-stone-600);
  --accent: var(--color-amber-600);
  /* ... */
}

html.dark .theme-container {
  --bg-primary: var(--color-stone-950);
  --text-primary: var(--color-stone-100);
  --text-secondary: var(--color-stone-400);
  --accent: var(--color-amber-600);
  /* ... */
}
```

### Theme Container

The `theme-container` class wraps all content and applies semantic color variables:

```tsx
<body className="theme-container">
  {/* Content uses --bg-primary, --text-primary, etc. */}
</body>
```

## CSS Modules

Components use CSS Modules for scoped styling:

```tsx
// component.tsx
import styles from "./component.module.css";

<div className={styles.wrapper}>
```

```css
/* component.module.css */
.wrapper {
  padding: var(--spacing-4);
}
```

### Naming Convention

- Files: `component-name.module.css`
- Classes: camelCase (e.g., `.headerWrapper`, `.postTitle`)

## Post Typography

`src/styles/post.css` styles MDX content within `.post`:

```css
.post h1 { /* ... */ }
.post h2 { /* ... */ }
.post p { /* ... */ }
.post ul, .post ol { /* ... */ }
.post blockquote { /* ... */ }
.post code { /* ... */ }
.post pre { /* ... */ }
```

### Content Container

Post pages wrap MDX in an article:

```tsx
<article className="post">
  <Content />
</article>
```

All typography styles are scoped to `.post` to avoid global conflicts.

## Syntax Highlighting

`src/styles/shiki.css` styles code blocks generated by `rehype-pretty-code`:

- Uses `dark-plus` theme from VS Code
- Supports line highlighting
- Responsive overflow handling

### Code Block Structure

```html
<figure data-rehype-pretty-code-figure>
  <pre data-language="typescript">
    <code>
      <span data-line>...</span>
    </code>
  </pre>
</figure>
```

## Utility Classes

`src/styles/utilities.css` provides common utilities:

```css
.main {
  max-width: 720px;
  margin: 0 auto;
  padding: var(--spacing-6);
}

.visually-hidden {
  /* Screen reader only */
}
```

## Responsive Design

Use CSS custom properties for breakpoints:

```css
@media (min-width: 768px) {
  .component {
    padding: var(--spacing-8);
  }
}
```

Or reference variables:

```css
@media (min-width: var(--breakpoint-md)) {
  /* ... */
}
```

## Adding New Styles

### For Components

1. Create `component-name.module.css` alongside the component
2. Import and use class names in the component
3. Use CSS variables for colors, spacing, typography

### For Global Changes

1. Add variables to `src/styles/variables.css`
2. Update `src/styles/global.css` for base element changes
3. Update `src/styles/post.css` for content typography

### For Theme Support

Ensure both light and dark variants are defined in `global.css`:

```css
html.light .theme-container {
  --my-new-color: #fff;
}

html.dark .theme-container {
  --my-new-color: #000;
}
```
